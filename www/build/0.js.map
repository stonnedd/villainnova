{"version":3,"sources":["../../src/pages/profile/profile.module.ts","../../src/pages/profile/profile.ts","../../src/service/profile-service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACR;AAUxC,IAAa,iBAAiB;IAA9B;IAAgC,CAAC;IAAD,wBAAC;AAAD,CAAC;AAApB,iBAAiB;IAR7B,+DAAQ,CAAC;QACR,YAAY,EAAE;YACZ,6DAAW;SACZ;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,6DAAW,CAAC;SACtC;KACF,CAAC;GACW,iBAAiB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZuB;AACkC;AACxB;AACF;AACX;AACK;AACJ;AACqB;AAEQ;AAShF,IAAa,WAAW;IAatB,qBAAmB,OAAsB,EAChC,SAAoB,EACpB,UAA0B,EAC1B,QAAkB,EAClB,WAAwB,EACxB,gBAAkC,EAClC,OAA0B;QANnC,iBAWC;QAXkB,YAAO,GAAP,OAAO,CAAe;QAChC,cAAS,GAAT,SAAS,CAAW;QACpB,eAAU,GAAV,UAAU,CAAgB;QAC1B,aAAQ,GAAR,QAAQ,CAAU;QAClB,gBAAW,GAAX,WAAW,CAAa;QACxB,qBAAgB,GAAhB,gBAAgB,CAAkB;QAClC,YAAO,GAAP,OAAO,CAAmB;QAXnC,iBAAY,GAAG,EAAE,CAAC;QAClB,SAAI,GAAQ,EAAE,CAAC;QACf,UAAK,GAAU,WAAW,CAAC;QAWzB,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,SAAS,CAAC,UAAC,KAAK;YACvD,KAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAChC,CAAC,CAAC,CAAC;IACL,CAAC;IAED,+BAAS,GAAT,UAAU,SAAS;QAAnB,iBAOC;QANC,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,CACrD,sBAAY;YACT,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;YAC1B,KAAI,CAAC,YAAY,GAAG,YAAY,CAAC;YACjC,SAAS,CAAC,QAAQ,EAAE,CAAC;QACxB,CAAC,CAAC,CAAC;IACP,CAAC;IAED,oCAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC;IAC5C,CAAC;IAED,8BAAQ,GAAR;QAAA,iBAmBC;QAlBC,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,SAAS,CACxC,eAAK;YACD,KAAI,CAAC,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;YACxB,KAAI,CAAC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;YAC9B,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;YAC/B,KAAI,CAAC,UAAU,CAAC,WAAW,CAAC,KAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,CACjD,kBAAQ;gBACN,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,QAAQ,CAAC;oBACzC,KAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/B,KAAI,CAAC,UAAU,CAAC,eAAe,CAAC,KAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,SAAS,CACrD,sBAAY;oBACT,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;oBAC1B,KAAI,CAAC,YAAY,GAAG,YAAY,CAAC;gBACpC,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;QACT,CAAC,EAAE,UAAC,GAAG;YACL,KAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAI,CAAC,gBAAgB,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;QAChE,CAAC,CAAC,CAAC;IACL,CAAC;IAED,qCAAe,GAAf;QAAA,iBAIC;QAHC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,UAAC,CAAC;YAC/B,KAAI,CAAC,SAAS,CAAC,eAAe,CAAC,gBAAgB,EAAE,CAAC,CAAC,UAAU,IAAI,MAAM,CAAC,CAAC;QAC7E,CAAC,CAAC,CAAC;IACL,CAAC;IAED,iCAAW,GAAX,UAAY,KAAK;QACf,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACnB,IAAI,EAAE,GAAG;YACP,MAAM,EAAG;gBACP,qBAAqB,EAAG;oBACtB,MAAM,CAAC;wBACL,GAAG,EAAE,IAAI;qBACV,CAAC;gBACJ,CAAC;aACF;SACF,CAAC;QACF,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,yFAAe,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9D,OAAO,CAAC,OAAO,CAAC,EAAC,EAAE,EAAG,EAAE,EAAC,CAAC,CAAC;IAC7B,CAAC;IAED,kCAAY,GAAZ,UAAc,QAAQ;QACpB,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;QAC/B,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;QACjC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC;QACjC,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC;IACvC,CAAC;IAED,gCAAU,GAAV,UAAW,YAAY,EAAE,KAAK;QAC5B,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,kGAAkB,EAAE,YAAY,CAAC,CAAC;QACpE,OAAO,CAAC,OAAO,CAAC;YACd,EAAE,EAAE,UAAU;SACf,CAAC,CAAC;IACL,CAAC;IAED,gCAAU,GAAV,UAAW,YAAY,EAAE,KAAK;QAC5B,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC;QAClC,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,yFAAe,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9D,OAAO,CAAC,OAAO,CAAC,EAAC,EAAE,EAAG,EAAE,EAAC,CAAC,CAAC;IAC7B,CAAC;IAKH,kBAAC;AAAD,CAAC;AArGC;IADC,gEAAS,CAAC,8DAAO,CAAC;kDACV,8DAAO,oBAAP,8DAAO;4CAAC;AAEjB;IADC,gEAAS,CAAC,gEAAS,CAAC;kDACV,gEAAS,oBAAT,gEAAS;8CAAC;AALV,WAAW;IAPvB,wEAAS,EAAE;IACX,gEAAS,CAAC;QACT,QAAQ,EAAE,cAAc;QACxB,WAAW,iFAAE,CAAc;OACa;KACzC,CAAC;gBAqBmC;AAqFpC;SAxGY,WAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACf2D;AACrC;AACV;AACO;AACZ;AACE;AAGjC,IAAa,cAAc;IACvB,wBAAoB,IAAU;QAAV,SAAI,GAAJ,IAAI,CAAM;IAAG,CAAC;IAClC,oCAAW,GAAX,UAAY,EAAE;QACV,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,mEAAS,CAAC,UAAU,GAAG,GAAG,GAAG,EAAE,CAAC;aAChD,GAAG,CAAC,UAAC,GAAa;YACf,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;YACzC,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;QAEtB,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAU,IAAK,0DAAU,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,KAAK,IAAI,cAAc,CAAC,EAAtD,CAAsD,CAAC,CAAC;IACzF,CAAC;IAED,wCAAe,GAAf,UAAgB,EAAE;QACd,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,mEAAS,CAAC,mBAAmB,GAAG,GAAG,GAAG,EAAE,CAAC;aAC7D,GAAG,CAAC,UAAC,GAAa;YACf,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;YAC7C,MAAM,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,SAAS,CAAC;QAChC,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAU,IAAK,0DAAU,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,KAAK,IAAI,cAAc,CAAC,EAAtD,CAAsD,CAAC,CAAC;IACrF,CAAC;IAGL,qBAAC;AAAD,CAAC;AApBY,cAAc;IAD1B,iEAAU,EAAE;qCAEiB,2DAAI;GADrB,cAAc,CAoB1B;AApB0B","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProfilePage } from './profile';\n\n@NgModule({\n  declarations: [\n    ProfilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ProfilePage),\n  ],\n})\nexport class ProfilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.module.ts","import { Component, ViewChild } from \"@angular/core\";\nimport { IonicPage, NavController, NavParams, PopoverController } from \"ionic-angular\";\nimport { ProfileService } from \"../../service/profile-service\";\nimport { Settings } from \"../../providers/settings/settings\";\nimport { ShowToaster } from \"../../utils/toaster\";\nimport { TranslateService } from \"@ngx-translate/core\";\nimport { Content, FabButton } from \"ionic-angular\";\nimport { AddSupplierPage } from \"../../pages/add-supplier/add-supplier\";\nimport { SupplierMapping} from \"../../utils/supplier-mapping\";\nimport { SupplierDetailPage} from \"../../pages/supplier-detail/supplier-detail\";\n\n@IonicPage()\n@Component({\n  selector: \"page-profile\",\n  templateUrl: \"profile.html\",\n  providers: [ProfileService, ShowToaster],\n})\n\nexport class ProfilePage {\n  \n  @ViewChild(Content)\n  content: Content;\n  @ViewChild(FabButton)\n  fabButton: FabButton;\n  private loginErrorString: string;\n  public userId: string;\n  userServices = [];\n  user: any = {};\n  title: string= \"Mi perfil\";\n\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public profileSvc: ProfileService,\n    public settings: Settings,\n    public showToaster: ShowToaster,\n    public translateService: TranslateService,\n    public popCtrl: PopoverController,\n    ) {\n    this.translateService.get(\"LOGIN_ERROR\").subscribe((value) => {\n      this.loginErrorString = value;\n    });\n  }\n\n  doRefresh(refresher) {\n    this.profileSvc.getUserServices(this.user.id).subscribe(\n      userServices => {\n         console.log(\"refreshing\");\n         this.userServices = userServices;\n         refresher.complete();\n      });\n  }\n  \n  ionViewDidLoad() {\n    console.log(\"ionViewDidLoad ProfilePage\");\n  }\n\n  ngOnInit() {\n    this.settings.settingsObservable.subscribe(\n      value => {\n          this.user.id = value.id;\n          this.user.token = value.token;\n          console.log(\"storage:\", value);\n          this.profileSvc.getUserData(this.user.id).subscribe(\n            userData => {\n              console.log(\"Datos de usuario\", userData),\n              this.loadUserData(userData[0]);\n              this.profileSvc.getUserServices(this.user.id).subscribe(\n                userServices => {\n                   console.log(userServices);\n                   this.userServices = userServices;\n                });\n            });\n      }, (err) => {\n        this.showToaster.reveal(this.loginErrorString, \"top\", 3000);\n    });\n  }\n\n  ngAfterViewInit() {\n    this.content.ionScroll.subscribe((d) => {\n        this.fabButton.setElementClass(\"fab-button-out\", d.directionY == \"down\");\n    });\n  }\n  \n  addProvider(event) {\n    console.log(event);\n    let ev = {\n      target : {\n        getBoundingClientRect : () => {\n          return {\n            top: \"50\",\n          };\n        },\n      },\n    };\n    let popover = this.popCtrl.create(AddSupplierPage, this.user);\n    popover.present({ev : ev});\n  }\n\n  loadUserData (userData) {\n    this.user.name = userData.name;\n    this.user.phone = userData.phone;\n    this.user.email = userData.email;\n    this.user.profile = userData.profile;\n  }\n\n  showDetail(supplierData, event) {\n    let popover = this.popCtrl.create(SupplierDetailPage, supplierData);\n    popover.present({\n      ev: \"onMarker\",\n    });\n  }\n\n  editDetail(supplierData, event) {\n    this.user.provider = supplierData;\n    let popover = this.popCtrl.create(AddSupplierPage, this.user);\n    popover.present({ev : \"\"});\n  }\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts","import { Geolocation} from \"@ionic-native/geolocation\";\r\nimport { Component } from \"@angular/core\";\r\nimport { SupplierModel} from \"../models/supplierModel\";\r\nimport { HttpModule, Http, Response, Headers, RequestOptions} from \"@angular/http\";\r\nimport { Constants} from \"../utils/constants\";\r\nimport { Observable} from \"rxjs/Rx\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport \"rxjs/add/operator/map\";\r\nimport \"rxjs/add/operator/catch\";\r\n\r\n@Injectable()\r\nexport class ProfileService {\r\n    constructor(private http: Http) {}\r\n    getUserData(id): Observable<any> {\r\n        return this.http.get(Constants.USER_BY_ID + \"/\" + id)\r\n            .map((res: Response) => {\r\n                console.log(\"response USER\", res.json());\r\n                return res.json();\r\n\r\n            }).catch((error: any) => Observable.throw(error.json().error || \"Server error\"));\r\n    }\r\n\r\n    getUserServices(id): Observable<any> {\r\n        return this.http.get(Constants.SERVICES_BY_USER_ID + \"/\" + id)\r\n        .map((res: Response) => {\r\n            console.log(\"response Services\", res.json());\r\n            return res.json().providers;\r\n        }).catch((error: any) => Observable.throw(error.json().error || \"Server error\"));\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/service/profile-service.ts"],"sourceRoot":""}