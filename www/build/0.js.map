{"version":3,"sources":["../../src/pages/profile/profile.module.ts","../../src/pages/profile/profile.ts","../../src/service/profile-service.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { ProfilePage } from './profile';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ProfilePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(ProfilePage),\r\n  ],\r\n})\r\nexport class ProfilePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.module.ts","import { Component, ViewChild } from \"@angular/core\";\r\nimport { IonicPage, NavController, NavParams, PopoverController } from \"ionic-angular\";\r\nimport { ProfileService } from \"../../service/profile-service\";\r\nimport { Settings } from \"../../providers/settings/settings\";\r\nimport { ShowToaster } from \"../../utils/toaster\";\r\nimport { TranslateService } from \"@ngx-translate/core\";\r\nimport { Content, FabButton } from \"ionic-angular\";\r\nimport { AddSupplierPage } from \"../../pages/add-supplier/add-supplier\";\r\nimport { SupplierMapping} from \"../../utils/supplier-mapping\";\r\nimport { SupplierDetailPage} from \"../../pages/supplier-detail/supplier-detail\";\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: \"page-profile\",\r\n  templateUrl: \"profile.html\",\r\n  providers: [ProfileService, ShowToaster],\r\n})\r\n\r\nexport class ProfilePage {\r\n  \r\n  @ViewChild(Content)\r\n  content: Content;\r\n  @ViewChild(FabButton)\r\n  fabButton: FabButton;\r\n  private loginErrorString: string;\r\n  public userId: string;\r\n  userServices = [];\r\n  user: any = {};\r\n  title: string= \"Mi perfil\";\r\n\r\n\r\n  constructor(public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public profileSvc: ProfileService,\r\n    public settings: Settings,\r\n    public showToaster: ShowToaster,\r\n    public translateService: TranslateService,\r\n    public popCtrl: PopoverController,\r\n    ) {\r\n    this.translateService.get(\"LOGIN_ERROR\").subscribe((value) => {\r\n      this.loginErrorString = value;\r\n    });\r\n  }\r\n\r\n  doRefresh(refresher) {\r\n    this.profileSvc.getUserServices(this.user.id).subscribe(\r\n      userServices => {\r\n         console.log(\"refreshing\");\r\n         this.userServices = userServices;\r\n         refresher.complete();\r\n      });\r\n  }\r\n  \r\n  ionViewDidLoad() {\r\n    console.log(\"ionViewDidLoad ProfilePage\");\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.settings.settingsObservable.subscribe(\r\n      value => {\r\n          this.user.id = value.id;\r\n          this.user.token = value.token;\r\n          console.log(\"storage:\", value);\r\n          this.profileSvc.getUserData(this.user.id).subscribe(\r\n            userData => {\r\n              console.log(\"Datos de usuario\", userData),\r\n              this.loadUserData(userData[0]);\r\n              this.profileSvc.getUserServices(this.user.id).subscribe(\r\n                userServices => {\r\n                   console.log(userServices);\r\n                   this.userServices = userServices;\r\n                });\r\n            });\r\n      }, (err) => {\r\n        this.showToaster.reveal(this.loginErrorString, \"top\", 3000);\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.content.ionScroll.subscribe((d) => {\r\n        this.fabButton.setElementClass(\"fab-button-out\", d.directionY == \"down\");\r\n    });\r\n  }\r\n  \r\n  addProvider(event) {\r\n    let ev = {\r\n      target : {\r\n        getBoundingClientRect : () => {\r\n          return {\r\n            top: \"50\",\r\n          };\r\n        },\r\n      },\r\n    };\r\n    this.user.isNewProvider = true;\r\n    this.user.provider = 0;\r\n    let popover = this.popCtrl.create(AddSupplierPage, this.user);\r\n    popover.present({ev : ev});\r\n  }\r\n\r\n  loadUserData (userData) {\r\n    this.user.name = userData.name;\r\n    this.user.phone = userData.phone;\r\n    this.user.email = userData.email;\r\n    this.user.profile = userData.profile;\r\n  }\r\n\r\n  showDetail(supplierData, event) {\r\n    let popover = this.popCtrl.create(SupplierDetailPage, supplierData);\r\n    popover.present({\r\n      ev: \"onMarker\",\r\n    });\r\n  }\r\n\r\n  editDetail(supplierData, event) {\r\n    this.user.provider = supplierData;\r\n    this.user.isNewProvider = false;\r\n    let popover = this.popCtrl.create(AddSupplierPage, this.user);\r\n    popover.present({ev : \"\"});\r\n  }\r\n\r\n\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts","import { Geolocation} from \"@ionic-native/geolocation\";\r\nimport { Component } from \"@angular/core\";\r\nimport { SupplierModel} from \"../models/supplierModel\";\r\nimport { HttpModule, Http, Response, Headers, RequestOptions} from \"@angular/http\";\r\nimport { Constants} from \"../utils/constants\";\r\nimport { Observable} from \"rxjs/Rx\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport \"rxjs/add/operator/map\";\r\nimport \"rxjs/add/operator/catch\";\r\n\r\n@Injectable()\r\nexport class ProfileService {\r\n    constructor(private http: Http) {}\r\n    getUserData(id): Observable<any> {\r\n        return this.http.get(Constants.USER_BY_ID + \"/\" + id)\r\n            .map((res: Response) => {\r\n                console.log(\"response USER\", res.json());\r\n                return res.json();\r\n\r\n            }).catch((error: any) => Observable.throw(error.json().error || \"Server error\"));\r\n    }\r\n\r\n    getUserServices(id): Observable<any> {\r\n        return this.http.get(Constants.SERVICES_BY_USER_ID + \"/\" + id)\r\n        .map((res: Response) => {\r\n            console.log(\"response Services\", res.json());\r\n            return res.json().providers;\r\n        }).catch((error: any) => Observable.throw(error.json().error || \"Server error\"));\r\n    }\r\n\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/service/profile-service.ts"],"sourceRoot":""}